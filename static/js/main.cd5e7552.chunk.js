(this["webpackJsonptodo-app-react-router"]=this["webpackJsonptodo-app-react-router"]||[]).push([[0],{30:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),r=n(23),a=n.n(r),i=(n(30),n(14)),s=n(4),d=n(5),u=n(21),l=n(3);function j(e){var t=e.submitEvent,n=e.submitText,o=e.title,r=e.defaultTodoText,a=Object(s.l)();console.log(r);var i=Object(c.useState)(r||""),j=Object(d.a)(i,2),b=j[0],O=j[1];Object(c.useEffect)((function(){O(r)}),[r]);return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(b),a("/")},children:[Object(l.jsx)("label",{htmlFor:"text-todo",children:o}),Object(l.jsx)("textarea",{name:"",id:"text-todo",cols:"30",rows:"10",placeholder:"Agregue su tarea",value:b,onChange:function(e){O(e.target.value)}}),Object(l.jsxs)("span",{className:"todoForm-button__cancel",onClick:function(){a("/")},children:[Object(l.jsx)(u.a,{})," "]}),Object(l.jsx)("button",{type:"submit",className:"todoForm-button todoForm-button__add",disabled:(null===b||void 0===b?void 0:b.length)<=0,children:n})]})}var b=n(8),O=n(7),f=n(11);function m(e,t){var n=Object(c.useReducer)(p,x({initialValue:t})),o=Object(d.a)(n,2),r=o[0],a=o[1],i=r.sincronizedItem,s=r.item;Object(c.useEffect)((function(){var n,c=localStorage.getItem(e);c?n=JSON.parse(c):(localStorage.setItem(e,JSON.stringify(t)),n=t),function(e){a({type:h.success,payload:e})}(n)}),[i]);return[s,function(t){localStorage.setItem(e,JSON.stringify(t)),function(e){a({type:h.save,payload:e})}(t)},function(){a({type:h.sincronize})}]}var x=function(e){return{sincronizedItem:!0,item:e.initialValue}},h={success:"SUCCESS",save:"SAVE",sincronize:"SINCRONIZE"},p=function(e,t){return function(e,t){var n;return n={},Object(O.a)(n,h.success,Object(f.a)(Object(f.a)({},e),{},{sincronizedItem:!0,item:t})),Object(O.a)(n,h.save,Object(f.a)(Object(f.a)({},e),{},{item:t})),Object(O.a)(n,h.sincronize,Object(f.a)(Object(f.a)({},e),{},{sincronizedItem:!1})),n}(e,t.payload)[t.type]||e};function v(){var e=m("TODOS_V2",[]),t=Object(d.a)(e,3),n=t[0],o=t[1],r=t[2],a=Object(c.useState)(""),i=Object(d.a)(a,2),s=i[0],u=i[1],l=n.filter((function(e){return!!e.completed})).length,j=n.length,O=Object(c.useMemo)((function(){return n.filter((function(e){return e.text.toLowerCase().includes(s.toLowerCase())}))}),[n,s]);return{states:{totalTodos:j,completedTodos:l,searchValue:s,filteredText:O,getTodo:function(e){var t,c=n.findIndex((function(t){return t.id===e}));return null===(t=n[c])||void 0===t?void 0:t.text}},stateUpdaters:{setSearchValue:u,toggleTodo:function(e){var t=n.findIndex((function(t){return t.id===e})),c=Object(b.a)(n);c[t].completed=!n[t].completed,o(c)},deleteTodo:function(e){var t=n.findIndex((function(t){return t.id===e})),c=Object(b.a)(n);c.splice(t,1),o(c)},editTodo:function(e,t){var c=n.findIndex((function(t){return t.id===e})),r=Object(b.a)(n);r[c].text=t,o(r)},addTodo:function(e){var t=function(e){if(!e.length)return 1;var t=e.map((function(e){return e.id}));return Math.max.apply(Math,Object(b.a)(t))+1}(n),c=Object(b.a)(n);c.push({completed:!1,text:e,id:t}),o(c)},setSincronizedItem:r}}}var T=function(){var e,t,n=Object(s.j)(),c=Object(s.n)(),o=Number(c.id),r=v().stateUpdaters.editTodo,a=v().states.getTodo;return t=(null===(e=n.state)||void 0===e?void 0:e.todo)?n.state.todo.text:a(o),Object(l.jsx)("div",{children:Object(l.jsx)(j,{submitEvent:function(e){return r(o,e)},submitText:"Editar",title:"Edita tu TODO",defaultTodoText:t})})};function g(e){var t=e.children;return Object(l.jsx)("header",{children:t})}function S(e){var t=e.totalTodos,n=e.completedTodos;return Object(l.jsxs)("h2",{className:"todo-counter",children:["Has completado ",n," de ",t," TODOs"]})}function N(e){var t=e.searchValue,n=e.setSearchValue;return Object(l.jsx)("input",{className:"todo-search",placeholder:"Search...",type:"text",value:t,onChange:function(e){n(e.target.value)}})}function y(e){var t=e.children||e.render;return Object(l.jsxs)("section",{className:"todo-list",children:[!e.totalTodos&&e.onEmptyTodos(),!!e.totalTodos&&!e.filteredText.length&&e.onEmptySearchResults(e.searchValue),e.filteredText.map(t)]})}var E=n(24),C=n(25);function I(e){return Object(l.jsxs)("li",{className:"todo-item",children:[Object(l.jsx)("span",{className:"icon icon-check ".concat(e.completed&&"icon-check--active"),onClick:e.onComplete,children:Object(l.jsx)(E.a,{})}),Object(l.jsx)("p",{className:"".concat(e.completed&&"todo-item-p-completed"),children:e.text}),Object(l.jsx)("span",{className:"icon icon-edit",onClick:e.onEdit,children:Object(l.jsx)(C.a,{})}),Object(l.jsx)("span",{className:"icon icon-delete",onClick:e.onDelete,children:Object(l.jsx)(u.a,{})})]})}function V(e){var t=e.onClick;return Object(l.jsx)("button",{className:"create-todo-button",onClick:t,children:"+"})}function w(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("p",{className:"empty-todos",children:"Agregue una tarea a realizar"})})}var k,z=(k=function(e){var t=e.show,n=e.toggleShow;return t?Object(l.jsx)("div",{className:"ChangeAlert-bg",children:Object(l.jsxs)("div",{className:"alert-container",children:[Object(l.jsx)("p",{children:"Hubo cambios en la lista"}),Object(l.jsx)("button",{onClick:function(){return n(!1)},children:"Actualizar"})]})}):null},function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),o=n[0],r=n[1];return Object(c.useEffect)((function(){var e=function(e){"TODOS_V1"===e.key&&(console.log("Hubo cambios en TODO_V1"),r(!0))};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),Object(l.jsx)(k,{show:o,toggleShow:function(){r(!1),e.sincronize(!1)}})});function D(){var e=Object(s.l)(),t=v(),n=t.states,c=t.stateUpdaters,o=n.filteredText,r=n.totalTodos,a=n.completedTodos,i=n.searchValue,d=c.toggleTodo,u=c.deleteTodo,j=c.setSearchValue,b=c.setSincronizedItem;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(g,{children:[Object(l.jsx)(S,{totalTodos:r,completedTodos:a}),Object(l.jsx)(N,{searchValue:i,setSearchValue:j})]}),Object(l.jsx)(y,{filteredText:o,totalTodos:r,searchValue:i,onEmptyTodos:function(){return Object(l.jsx)(w,{})},onEmptySearchResults:function(e){return Object(l.jsxs)("p",{className:"empty-todos",children:["No hay resultados para: ",e]})},render:function(t){return Object(l.jsx)(I,{text:t.text,completed:t.completed,onComplete:function(){return d(t.id)},onEdit:function(){return e("/edit/"+t.id,{state:{todo:t}})},onDelete:function(){return u(t.id)}},t.id)}}),Object(l.jsx)(V,{onClick:function(){return e("/new")}}),Object(l.jsx)(z,{sincronize:b})]})}var F=function(){var e=v().stateUpdaters.addTodo;return Object(l.jsx)("div",{children:Object(l.jsx)(j,{submitEvent:function(t){return e(t)},submitText:"A\xf1adir",title:"Escribe un nuevo TODO"})})};function _(){return Object(l.jsx)(i.a,{children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{path:"/",element:Object(l.jsx)(D,{})}),Object(l.jsx)(s.a,{path:"/new",element:Object(l.jsx)(F,{})}),Object(l.jsx)(s.a,{path:"/edit/:id",element:Object(l.jsx)(T,{})}),Object(l.jsx)(s.a,{path:"*",element:Object(l.jsx)("p",{children:"Not Found"})})]})})}a.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(_,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.cd5e7552.chunk.js.map